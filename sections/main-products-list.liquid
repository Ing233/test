{%- comment -%} 榜单页 (ql20250201) {%- endcomment -%}
{% assign ql_lsitRanking = page.metafields.custom.list_ranking.value %}
{% if page.handle == ql_lsitRanking.page %}
<style>
  /* 布局 */
  .product-block__inner .spt-wishlist-element {
    display: none;
}
  #page-content .product-list {
    margin: 1em 0;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
  }

  .ql-ranking.top_banner {
    position: absolute;
    z-index: 100;
    top: 20px;
    left: 5px;
    text-align: left;
  }
  #ql_other-products {
    display: flex;
    flex-wrap: wrap;
    margin-left: auto;
    margin-right: auto;
}

  .ql-ranking.top_banner .no1 {
    color: #b77722;
  }

  .ql-ranking.top_banner .no2 {
    color: #898782;
  }

  .ql-ranking.top_banner .no3 {
    color: #b97349;
  }

  .ql-ranking.top_banner .nox {
    color: #798993;
  }

  .ql-ranking.top_banner .no {
    position: relative;
    display: flex;
    align-items: center;
    font-weight: 800;
    font-family: 'Muli-ExtraBold', 'Muli', 'sans-serif';
    width: auto;
  }

  .ql-ranking.top_banner .ql-top {
    position: absolute;
    top: 8px;
    left: 0;
    right: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    margin: auto;
    font-weight: 600;
    font-size: 14px;
    line-height: 1;
  }

  .ql-ranking.top_banner .no svg {
    width: 35px;
    height: 35px;
  }

  #trending-top-3{
    position: relative;
    display: grid;
    align-items: baseline;
    {% comment %} grid-template-columns: 0.9fr 1fr 0.85fr;
    padding: 0px 50px 50px 50px;
    grid-template-areas: 'b a c'; {% endcomment %}
    grid-template-columns: 1.1fr 0.85fr 0.85fr;
    grid-template-areas: 'a b c';
    align-items: flex-start;
    padding: 0;
    grid-gap: 30px;
    background: transparent;
    width: 100%;
    z-index: 10;
  }
  {% comment %} #trending-top-3::after {
    content: "";
    width: 100%;
    position: absolute;
    left: 0;
    bottom: 0;
    height: 65%;
    box-shadow: 0px -6px 10px #f3f1f2, 0px 6px 10px #f3f1f2;
    background: #fff;
    z-index: -1;
  } {% endcomment %}


  /* 过滤 */
  .usf-sr-config {
    display: flex;
    width: 100%;
    align-items: center;
    justify-content: space-between;
    padding: 10px 0;
    border-top: 1px solid #e6e6e6;
    border-bottom: 1px solid #e6e6e6;
    margin-top: 13px;
    margin-bottom: 30px;
  }

  .usf-sr-summary {
      width: 100%;
      font-size: .9em;
      text-align: left;
  }
  .usf-views {
      display: flex;
      align-items: center;
  }
  .usf-view.usf-grid {
    margin: 0 8px 0 20px;
  }
  .usf-view {
    width: 18px;
    height: 18px;
    opacity: .3;
    display: inline-block;
    transition: opacity .25sease-in-out;
    line-height: 1;
  }
  button.usf-btn {
    cursor: pointer;
    background: none;
    text-transform: initial;
    letter-spacing: initial;
    border-radius: initial;
    width: initial;
    min-width: initial;
    height: initial;
    min-height: initial;
    transition: none;
    padding: 0;
    border: 0;
  }
  .usf-view.usf-active {
    opacity: 1;
  }
  .usf-view svg {
    fill: currentColor;
    width: 18px;
    height: 18px;
  }
  .usf-view.usf-grid.usf-btn.usf-active {
    color: #000102;
  }

  button.usf-view.usf-list.usf-btn {
    color: #afafb0;
    opacity: 1;
  }
  
  #trending-top-3 .ql-bag-icon.pc-show{
    display: none;
  }

  

  /* 榜单样式 */
  .color-white {
      color: #fff;
  }
  .bg-red {
      background: #9c2922;
  }
  .bg-pink{
    background: #f1e6e5;
  }
  .icon-board_label {
    padding: 0 1em;
    margin: 0;
  }
    
  /* 排名样式 */
  #ql_other-products .product-label.product-label--trending-top {
    height: 30px;
    align-items: center;
    padding: 5px 10px;
  }

  {% comment %} 榜单描述 {% endcomment %}
  .trending-des {
      display: flex;
      width: 100%;
      justify-content: space-between;
      align-items: end;
      font-style: normal;
      text-align: left;
      line-height: 1;
      padding: 1rem 00px;
  }

  .trending-des-heading {
      font-size: var(--pc-size);
      font-weight: 500;
      padding: 1rem 0px;
  }

  .trending-des-text p {
    margin: 5px 0;
  }

  .trending-des-text, .trending-des-link {
      font-size: var(--pc-size);
  }

  .underline {
      text-decoration: underline;
  }
  {% comment %} ----------------- {% endcomment %}

  @media (min-width: 768px) {
     /* top 3 */
      .grid-item-1 {
        grid-area: a;
      }
      .grid-item-2 {
        grid-area: b;
      }
      .grid-item-3 {
        grid-area: c;
      }

    .product-list .feature-header {
        margin-bottom: 1.5em;
        margin-top: 0.7em;
        font-size: 2rem;
    }

    #trending-top-3 .ql-bag-icon.pc-show {
      display: flex;
      justify-content: center;
      align-items: center;
      position: absolute;
      width: 24px;
      height: 24px;
      background: #1B1B1B;
      color: #fff;
      text-align: center;
      padding: 0px;
      bottom: 0;
      letter-spacing: normal;
      font-size: 16px;
      line-height: 16px;
      right: 0px;
      border-radius: 2px;
      z-index: 20;
    }


    /* 文本样式 */
    #trending-top-3 .cc-quick-buy-btn {
      display: none;
    }

    #trending-top-3 .grid-item-1 ul.cc-swatches {
        display: none;
    }

    #trending-top-3 .title {
      margin-top: 20px;
    }

    #trending-top-3 .title, #trending-top-3 .ql-discount, #trending-top-3 .price {
        font-size: 15px;
    }

    #trending-top-3 .price {
        line-height: 1;
        margin-bottom: 15px;
    }
    #ql_other-products .product-blocks {
    display: grid;
    width: 100%;
    grid-template-columns: repeat(4, 1fr);
    grid-gap: 20px;
    }

    #ql_other-products .product-blocks .product-block {
        width: 100%;
        padding-left: 0;
        padding-right: 0;
    }

    #ql_other-products .product-blocks .product-block .title {
      font-size: 13px;
    }

    #ql_other-products .product-blocks .product-block .price {
        font-size: 13px;
    }

    #page-content .product-list #ql_other-products {
      width: 75%;
      margin-left: auto;
      margin-right: auto;
    }
  }

  @media (max-width: 767px) {
    #page-content .product-list .column.quarter {
      width: 50%;
    }

    #trending-top-3 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-areas: none;
      align-items: unset;
      grid-gap: 0;
      margin: 0;
      padding: 0;
      background: transparent;
    }
    #trending-top-3::after {
      background: none;
      box-shadow: none;
    }

    #trending-top-3 .product-block:not(.grid-item-1) {
        padding: 0 10px;
    }

    #trending-top-3 .ql-bag-icon {
      right: 5px;
      padding: 0;
    }
    #trending-top-3 .product-block:not(.grid-item-1) ul.cc-swatches {
        padding-bottom: 8px;
    }

    .product-list .feature-header:not(.feature-header__no-gap) {
      margin-top: 15px;
      margin-bottom: 15px;
    }

    .product-list .trending-des-heading {
        font-weight: 700;
        padding-top: 5px;
        padding-bottom: 7px;
    }

    .product-list .trending-des-link {
        width: 20%;
        text-align: right;
    }

    .product-list .product-block .price {
        font-size: 13px;
    }

    /* top 01 样式 */
    #trending-top-3 .grid-item-1.product-block{
      grid-column: 1 / -1;
      margin: 10px 10px 0;
    }
    #trending-top-3 .grid-item-1 .ql_product-text {
      margin-bottom: 15px;
    }
    #trending-top-3 .grid-item-1 ul.cc-swatches {
      display: flex;
      margin: 5px 0;
    }

    #trending-top-3 .grid-item-1 ul.cc-swatches *, #trending-top-3 .grid-item-1 ul.cc-swatches * {
        width: 24px;
        height: 24px;
    }

    #trending-top-3 .grid-item-1 .title {
        min-height: 25px;
    }
    #trending-top-3 .grid-item-1 .ql-discount{
      display: none;
    }

    {% comment %} 榜单描述 {% endcomment %}
    .trending-des {
        padding-left: 15px;
        padding-right: 15px;
        padding-top: 0;
    }

    .trending-des-heading {
        font-size: var(--mb-size);
    }

    .trending-des-text, .trending-des-link {
        font-size: var(--mb-size);
    }
    
  }

  {% comment %} #trending-top-3 .grid-item-1 .product-label.product-label--trending-top {
      font-size: 10px;
      line-height: 1;
      padding: 6px 4px;
    }
  @media (min-width: 768px) {
    #trending-top-3 .product-label.product-label--trending-top {
      font-size: 10px;
      line-height: 1;
      padding: 6px 4px;
    }
  }

  @media (min-width: 1400px){
    #trending-top-3 .product-label.product-label--trending-top {
        font-size: 14px;
        padding: 8px 6px;

    }
  }

  @media (min-width: 1800px){
    #trending-top-3 .product-label.product-label--trending-top {
        font-size: 18px;
        padding: 10px 8px;
    } {% endcomment %}
  }
</style>


<div class="product-list" style="margin: 0;padding-bottom: 3em;">
  <h1 class="feature-header" data-cc-animate>{{ page.title }}</h1>

  <div id="ql_other-products">
    {% comment %} 榜单表述 {% endcomment %}
    {% assign had_block = false %}
    {% for block in section.blocks %}
      {% if block.type != "ql_trending_des" or had_block == true or block.settings.page == blank or block.settings.page != page.handle or block.settings.page.template_suffix != page.template_suffix %}
        {% continue %}
      {% endif %}
      {% assign had_block = true %}
      <div id="trending-des--{{ block.settings.page }}" class="trending-des">
        <div class="trending-des-container">
            {% if block.settings.heading != '' %}
                <div class="trending-des-heading" style="--pc-size: {{ block.settings.pc_heading_size }}px; --mb-size: {{ block.settings.mb_heading_size }}px;">
                    {{ block.settings.heading }}
                </div>
            {% endif %}
            {% if block.settings.text != '' %}
                <div class="trending-des-text" style="--pc-size: {{ block.settings.pc_text_size }}px; --mb-size: {{ block.settings.mb_text_size }}px;">
                    {{ block.settings.text }}
                </div>
            {% endif %}
        </div>
        {% if block.settings.link_text != '' and block.settings.link != nil %}
          <a class="trending-des-link underline" target="_blank" href="{{ block.settings.link }}"
          style="--pc-size: {{ block.settings.pc_text_size }}px; --mb-size: {{ block.settings.mb_text_size }}px;">{{ block.settings.link_text }}</a>
        {% endif %}
      </div>
    {% endfor %}


    <div id="trending-top-3" data-products-list='{{ql_lsitRanking.products | json}}'>
      {% assign q_index = 0 %}
      {% for this_handle in ql_lsitRanking.products %}
        {% assign this_product = nil %}
        {% if q_index == 3 %}
          </div>
          <div class="product-blocks">
        {% endif %}
        {% if q_index > 20 %}
          {% break %}
        {% endif %}
        {% assign t_handle = this_handle | handle %}
        {% assign this_product = all_products[this_handle] %}
        {% if this_product == nil %}
          {% continue %}
        {% endif %}
        {% assign q_index = q_index | plus: 1 %}
        {% assign p_class = 'grid-item-' | append: q_index %}
        {% assign hidden_subtitle = true %}
        {% if q_index > 3 %}
          {% assign p_class = ' column quarter' %}
          {% assign hidden_subtitle = false %}
        {% endif %}
        
        {% render 'product-block', product: this_product, product_class: p_class, i: forloop.index, ql_ranking: q_index, hidden_color: false, page_handle: page.handle, hidden_pageHandle: true, hidden_subtitle: hidden_subtitle, hidden_tag: true %}
  
      {% endfor %}
      </div>
    
    
  </div>
  
</div>
{% endif %}


{% schema %}
{
"name": "Products List",
"settings": [
{
"type": "checkbox",
"id": "show_page_content",
"label": "Show page content",
"default": true
},
],
"blocks": [
    {
        "type": "ql_trending_des",
        "name": "Page Description",
        "settings": [
            {
                "type": "page",
                "id": "page",
                "label": "要投放到哪个榜单页中",
                "info": "只对榜单页有效。即page的模板不是'products-list'模板, 则不投放"
            },
            {
                "type": "text",
                "id": "heading",
                "label": "Heading",
                "default": "MUST-BUY"
            },
            {
                "type": "range",
                "min": 1,
                "max": 100,
                "unit": "px",
                "id": "pc_heading_size",
                "label": "Heading font size (PC)",
                "default": 30
            },
            {
                "type": "range",
                "min": 1,
                "max": 100,
                "unit": "px",
                "id": "mb_heading_size",
                "label": "Heading font size (MB)",
                "default": 18
            },
            {
                "type": "richtext",
                "id": "text",
                "label": "Text",
                "default": "<p>Your CRZ wardrobe starts here.</p>\n<p>these are the most popular products right now</p>"
            },
            {
                "type": "range",
                "min": 1,
                "max": 100,
                "unit": "px",
                "id": "pc_text_size",
                "label": "Text font size (PC)",
                "default": 15
            },
            {
                "type": "range",
                "min": 1,
                "max": 100,
                "unit": "px",
                "id": "mb_text_size",
                "label": "Text font size (MB)",
                "default": 15
            },
            {
                "type": "text",
                "id": "link_text",
                "label": "Link text",
                "default": "View all"
            },
            {
                "type": "url",
                "id": "link",
                "label": "Link"
            }
        ]
    }
],
"enabled_on": {
    "templates": ["page"]
}
}
{% endschema %}